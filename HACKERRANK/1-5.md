[:grey_question: HACKERRANK : The Blunder](https://www.hackerrank.com/challenges/the-blunder/problem?isFullScreen=true)
```
# ROUNDì— ì†Œìˆ˜ì  í• ë‹¹ ì•ˆí•˜ë©´ ì •ìˆ˜ë¡œ ë¦¬í„´
# ROUND(AVG(REPLACE(Salary, 0, ''))) : 0ì´ ë¹ ì§„ (Amanda ì…ë ¥) ë²„ì „

SELECT ROUND(AVG(Salary)) - ROUND(AVG(REPLACE(Salary, 0, ''))) 
FROM EMPLOYEES
;
```
[ğŸ”º HACKERRANK : Type of Triangle](https://www.hackerrank.com/challenges/what-type-of-triangle/problem?isFullScreen=true)
```
SELECT 
CASE WHEN A+B<=C OR B+C<=A OR A+C<=B THEN 'Not A Triangle'
     WHEN A=B AND B=C THEN 'Equilateral'
     WHEN A!=B AND B!=C AND C!=A THEN 'Scalene'
     ELSE 'Isosceles'
     END AS triangle_variety
FROM TRIANGLES
;
```
* ì™œ ì‚¼ê°í˜•ì´ ì•„ë‹Œ ê²½ìš°(Not A Triangle)ë¥¼ ë¨¼ì € ì‹¤í–‰í•´ì•¼ í• ê¹Œ?
> CASEë¬¸ì€ ìœ„ë¶€í„° ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ”ë°, ì˜ˆë¥¼ ë“¤ì–´ A(1),B(2),C(3)ì´ë¼ê³  í–ˆì„ ë•Œ ì‚¼ê°í˜•ì´ ì•„ë‹Œ ê²½ìš° íŒë³„ë¬¸ì´ ë§ˆì§€ë§‰ì— ìˆë‹¤ë©´ ì¤‘ê°„ì˜ 'Scalene'ìœ¼ë¡œ ê±¸ëŸ¬ì ¸ ë“¤ì–´ê°€ê²Œë¨. ë…¼ë¦¬ì ì¸ ìœ íš¨ì„±(ì‚¼ê°í˜•ì´ ì„±ë¦½ í•˜ëƒ ì•ˆí•˜ëƒ ì°¨ì›) ê²€ì‚¬ëŠ” í•­ìƒ ì œì¼ ë¨¼ì € ì´ë£¨ì–´ì ¸ì•¼ í•¨. ê·¸ ë’¤ì— ì–´ë–¤ ì‚¼ê°í˜•ì¸ì§€ ê±°ë¥´ëŠ” ë¶€ë¶„ì„ ë„£ì–´ì•¼ í•¨.

[ğŸ¥‡ HACKERRANK : Top Earners](https://www.hackerrank.com/challenges/earnings-of-employees/problem?isFullScreen=true)
```
# ì²˜ìŒì— ì¨ì„œ ì˜¤ë¥˜ë‚¬ë˜ ê²ƒ
SELECT MAX(salary * months) AS earnings
    ,(SELECT COUNT(name)
      FROM Employee
      WHERE MAX(salary * months)
    ) AS most_earnings
FROM Employee
;
```
* ì™œ ì˜¤ë¥˜ê°€ ë‚¬ë‚˜?
> ì„œë¸Œì¿¼ë¦¬ ì•ˆ WHEREì ˆì—ì„œ ì§‘ê³„í•¨ìˆ˜ë¥¼ ì“°ê³ ìˆëŠ”ë°, ì§ì ‘ ì—°ì‚°ì´ ë¶ˆê°€ëŠ¥í•´ ì˜¤ë¥˜ê°€ ë°œìƒí•¨. ë©”ì¸ì¿¼ë¦¬ì˜ earningsì™€ ê·¸ ì‹ì„ ë°”ë¡œ í™œìš©í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— CTE ë˜ëŠ” ìì²´ì ì¸ ì„œë¸Œì¿¼ë¦¬ë¥¼ í†µí•´ ë”°ë¡œ ê³„ì‚°í•´ì¤˜ì•¼ í•¨
```
# ì„œë¸Œì¿¼ë¦¬ë§Œ í™œìš©í•´ì„œ êµ¬í•  ë•Œ
SELECT MAX(salary * months) AS earnings
    ,(SELECT COUNT(name)
      FROM Employee
      WHERE salary * months = (
        SELECT MAX(salary * months) FROM Employee
      )
    ) AS most_earnings
FROM Employee
;
```
```
# CTE í™œìš©
WITH MaxEarnings AS (
    SELECT MAX(salary * months) AS max_earnings
    FROM Employee
)
SELECT 
    max_earnings AS earnings,
    (SELECT COUNT(*) 
     FROM Employee 
     WHERE salary * months = max_earnings) AS most_earnings
FROM MaxEarnings;

```
* ì•„ë‹ˆ ì´ê±° ë™ì‘ ì•ˆí•˜ëŠ”ë° ì§€í”¼í‹°ê°€ ì•Œë ¤ì¤Œ ã…¡ã…¡ ì›”ìš”ì¼ì— ê°•ì‚¬ë‹˜ê»˜ ì—¬ì­¤ë³´ê¸° ì™œ ì•ˆë˜ëŠ”ì§€ ì´í•´ê°€ ì•ˆë¼
> WITH ì‹ ì•ˆì—ì„œ ìµœëŒ“ê°’ì„ ê³„ì‚°í•œ í•˜ë‚˜ì˜ ê°’ì´ ë‚˜ì˜¤ê²Œ ë¨ -> í•˜ë‚˜ì˜ ìŠ¤ì¹¼ë¼ ê°’ë³´ë‹¤ëŠ” í…Œì´ë¸” í˜•íƒœë¡œ ë§Œë“¤ê¸° ìœ„í•¨ì„
> SELECT max_earnings FROM MaxEarnings
> ë°‘ì˜ whereì ˆ max_earnings ì•ˆì—ë„ ìœ„ì˜ ì‹ì„ ë„£ì–´ì¤˜ì•¼ í•˜ê¸° ë•Œë¬¸ì— ê¸¸ì–´ì§ -> ë”°ë¼ì„œ ì„œë¸Œì¿¼ë¦¬ë¥¼ ì“°ëŠ”ê²Œ í›¨ì”¬ íš¨ìœ¨ì ì´ë‹¤

```
WITH temp AS (
    SELECT MAX(salary * months) AS max_earnings
    FROM Employee
)

SELECT *
FROM temp #ì¤‘ê°„ì¤‘ê°„ ì˜ ëŒì•„ê°€ëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´
;

SELECT 
    max_earnings AS earnings,
    (SELECT COUNT(*) 
     FROM Employee 
     WHERE salary * months = (SELECT * FROM temp)) AS most_earnings
FROM temp;
```
* CTEë¥¼ ì“¸ ìˆ˜ëŠ” ìˆì§€ë§Œ ê²°êµ­ ê·¸ ì•ˆì—ì„œ ì„œë¸Œì¿¼ë¦¬ë¥¼ ì¨ì¤˜ì•¼í•˜ê¸° ë•Œë¬¸ì— ê± ì„œë¸Œì¿¼ë¦¬ ì“°ëŠ”ê²Œ ë‚«ë‹¤

[ğŸ¾ HACKERRANK : contest leaderboard](https://www.hackerrank.com/challenges/contest-leaderboard/problem)
```
SELECT t.hacker_id, h.name, SUM(t.max_score) AS total_score
FROM (
    SELECT hacker_id, challenge_id, MAX(score) AS max_score
    FROM Submissions
    GROUP BY hacker_id, challenge_id
) t
JOIN Hackers h USING (hacker_id)
GROUP BY t.hacker_id, h.name
HAVING total_score != 0
ORDER BY total_score DESC, t.hacker_id
;
```

[ğŸ—ï¸ HACKERRANK : NEW COMPANY](https://www.hackerrank.com/challenges/the-company/problem)
```
SELECT company_code, founder
, (SELECT COUNT(DISTINCT lead_manager_code) FROM Lead_Manager WHERE company_code = c.company_code) AS lmg_count
, (SELECT COUNT(DISTINCT senior_manager_code) FROM Senior_Manager WHERE company_code = c.company_code) AS smg_count
, (SELECT COUNT(DISTINCT manager_code) FROM Manager WHERE company_code = c.company_code) AS mg_count
, (SELECT COUNT(DISTINCT employee_code) FROM Employee WHERE company_code = c.company_code) AS emp_count
FROM Company c
ORDER BY c.company_code
;
```
